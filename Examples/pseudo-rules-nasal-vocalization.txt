%%% Definitions
word -- string with the ortographic form of the word
pron -- string with the phonetic transcription of the word
new_pron -- string with the modified pronunciation
dict -- dictionary with all CMU words as keys and pron as values

for word, pron in dict:

 %%% Rules after Kluge (2007), Kluge & Baptista (2008) and Kluge et al. (2012)
 %%% The final nasal is deleted and the previous vowel is mapped on the most
 %%% acoustically similar BP vowel
 if pron has [(aa|ae|ah) (m|n|g) Cons]: % e.g. rose 
   replace nasal and prev. vowel by [a~] and append new_pron to dict 
 if pron has [eh (m|n|g) Cons]: % e.g. rose 
   replace nasal and prev. vowel by [e~] and append new_pron to dict 
 if pron has [(ih|iy) (m|n|g) Cons]: % e.g. rose 
   replace nasal and prev. vowel by [i~] and append new_pron to dict 
 if pron has [ao (m|n|g) Cons]: % e.g. rose 
   replace nasal and prev. vowel by [o~] and append new_pron to dict 
 if pron has [(uh|uw) (m|n|g) Cons]: % e.g. rose 
   replace nasal and prev. vowel by [u~] and append new_pron to dict 

 %%% Rules inspired by Silveira (2007) and Silveira (2012)
 %%% The final nasal is deleted and the previous vowel is nasalized, however
 %%% the vowel produced is influenced by the ortographic form of the word
 for each [(m|n|ng)] in pron:
   if the next phone is a consonant and the previous is a vowel:
     if words has <A(M|N)>: % e.g. 
       replace nasal and prev. vowel by [a~] and append new_pron to dict 
     elif words has <E(M|N)>: % e.g. 
       replace nasal and prev. vowel by [e~] and append new_pron to dict 
     elif words has <I(M|N)>: % e.g. 
       replace nasal and prev. vowel by [i~] and append new_pron to dict 
     elif words has <O(M|N)>: % e.g. 
       replace nasal and prev. vowel by [o~] and append new_pron to dict     
     elif words has <U(M|N)>: % e.g. 
       replace nasal and prev. vowel by [u~] and append new_pron to dict 

end for
